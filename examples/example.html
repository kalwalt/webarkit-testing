<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simple example with WebARKit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1">
    <link rel="stylesheet" href="css/nft-style.css">
  </head>
  <body>
    <script src="../dist/WebARKit.js"></script>
    <script>
       WebARKit.WebARKitController.init(640, 480,'../examples/config.json').then(wark => {
        wark.loadTracker('data/pinball.jpg').then(_ => {   
          var res;
          wark.startVideo(function(video){
            console.log(video);
            function update() {
              wark.process(video)
              requestAnimationFrame(update)
            }
            update(video);
          })
  
          window.addEventListener('loadedvideo', function(e){
            console.log(e);
            var canva = document.createElement('canvas');
            canva.id = "test"
            document.body.appendChild(canva)
            canva.width = 640;
            canva.height = 480;
            var ctx = canva.getContext('2d');
            var img_data = ctx.createImageData(canva.width, canva.height);
            function updateCanva(){
              res = wark.getVideo();
              img_data.data.set(res)
              ctx.putImageData(img_data,0,0)
              requestAnimationFrame(updateCanva)
            }
            updateCanva()
            console.log(wark);
            //wark.track();
            //wark.resetTracking();
            //wark.track();
            console.log(wark);
          })
        })
      })
    </script>
  </body>
</html>
